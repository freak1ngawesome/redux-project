{"version":3,"sources":["components/app-header/shopping-cart-solid.svg","components/app/food-bg.jpg","components/menu-list-item/index.js","components/menu-list-item/menu-list-item.js","components/resto-service-context/index.js","components/resto-service-context/resto-service-context.js","components/hoc/index.js","components/hoc/with-resto-service.js","components/spinner/index.js","components/spinner/spinner.js","components/menu-list/menu-list.js","actions/index.js","components/menu-list/index.js","components/pages/main-page.js","components/cart-table/cart-table.js","components/cart-table/index.js","components/pages/cart-page.js","components/app-header/index.js","components/app-header/app-header.js","components/app/index.js","components/app/app.js","components/error/index.js","components/error/error.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/resto-service.js","reducers/index.js","store.js","index.js"],"names":["module","exports","__webpack_require__","p","MenuListItem","_ref","menuItem","onAddToCart","title","price","url","category","react_default","a","createElement","className","src","alt","onClick","RestoServiceContext","React","createContext","WithRestoService","Wrapped","props","components_resto_service_context","Consumer","RestoService","Object","assign","Spinner","MenuList","_this","this","menuRequested","getMenuItems","then","res","menuLoaded","_this$props","menuItems","loading","addedToCart","components_spinner","id","map","item","components_menu_list_item","key","Component","mapDispatchToProps","newMenu","type","payload","connect","state","menu","MainPage","components_menu_list","deleteFromCart","CartTable","_ref2","items","Fragment","index","arr","count","CartPage","components_cart_table","AppHeader","total","forEach","e","href","cartIcon","App","style","background","concat","Background","components_app_header","main_page","cart_page","Error","ErrorBoundry","error","setState","components_error","children","_apiBase","fetch","ok","status","json","getResource","ititialState","reducer","arguments","length","undefined","action","objectSpread","cardItems","console","log","indX","findIndex","toConsumableArray","newItem","find","idx","itemIndex","elem","slice","store","createStore","restoService","ReactDOM","render","es","error_boundry","Provider","value","react_router_dom","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.bee30e0c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/shopping-cart-solid.701d6d1d.svg\";","module.exports = __webpack_public_path__ + \"static/media/food-bg.698e5e80.jpg\";","import MenuListItem from './menu-list-item';\nexport default MenuListItem;","import React from 'react';\nimport './menu-list-item.scss';\n\nconst MenuListItem = ({menuItem,onAddToCart}) => {\n  const {title, price, url, category} = menuItem\n    return (\n            <li className=\"menu__item\">\n                <div className=\"menu__title\">{title}</div>\n                <img className=\"menu__img\" src={url} alt={title}></img>\n    <div className=\"menu__category\">Category: <span>{category}</span></div>\n    <div className=\"menu__price\">Price: <span>{price}$</span></div>\n                <button onClick ={() => onAddToCart()}className=\"menu__btn\">Add to cart</button>\n            </li>\n    )\n}\n\nexport default MenuListItem;","import RestoServiceContext from './resto-service-context';\n\nexport default RestoServiceContext;","import React from 'react'\r\n\r\nconst RestoServiceContext = React.createContext()\r\n\r\nexport default RestoServiceContext","import WithRestoService from './with-resto-service';\n\nexport default WithRestoService;","import React from 'react';\nimport RestoServiceContext from '../resto-service-context';\n\nconst WithRestoService = () => (Wrapped) => {\n  return (props) => {\n    return(\n      <RestoServiceContext.Consumer>\n        {\n          (RestoService) => {\n            return <Wrapped {...props} RestoService={RestoService}/>\n          }\n        }\n      </RestoServiceContext.Consumer>\n    )\n  }\n};\n\nexport default WithRestoService;","import Spinner from './spinner';\n\nexport default Spinner;","import React from 'react';\n\nconst Spinner = () => {\n    return <div className=\"spinner\">loading...</div>\n}\n\nexport default Spinner;","import React, {Component} from 'react';\nimport MenuListItem from '../menu-list-item';\nimport {connect} from 'react-redux';\nimport './menu-list.scss';\nimport WithRestoService from '../hoc'\nimport {menuLoaded,menuRequested,addedToCart} from '../../actions/'\nimport Spinner from '../spinner'\n\nclass MenuList extends Component {\n  componentDidMount(){\nthis.props.menuRequested()\n\n    const {RestoService} = this.props\n    RestoService.getMenuItems()\n    .then(res => this.props.menuLoaded(res))\n  }\n\n    render() {\n      const {menuItems,loading,addedToCart} = this.props\n\n      if(loading){\n        return <Spinner/>\n      }\n        return (\n            <ul className=\"menu__list\" id='menu'>\n              {\n                menuItems.map(item => {\n                  return <MenuListItem \n                  key={item.id} \n                  menuItem={item}\n                  onAddToCart={() => addedToCart(item.id)}/>\n                })\n              }\n            </ul>\n        )\n    }\n};\n\nconst mapStateToProps =(state) => {\n  return {\n    menuItems: state.menu,\n    loading: state.loading\n  }\n}\n\nconst mapDispatchToProps = {\n  menuLoaded,\n  menuRequested,\n  addedToCart\n}\n\nexport default WithRestoService()(connect(mapStateToProps,mapDispatchToProps)(MenuList));","export const menuLoaded = (newMenu) => {\r\n  return {\r\n    type: 'MENU_LOADED',\r\n    payload: newMenu\r\n  }\r\n}\r\n\r\nexport const menuRequested = () => {\r\n  return {\r\n    type: 'MENU_REQUESTED',\r\n  }\r\n}\r\n\r\nexport const addedToCart = (id) => {\r\n  return {\r\n    type: 'ITEM_ADD_TO_CART',\r\n    payload: id\r\n  }\r\n}\r\n\r\nexport const deleteFromCart = (id) => {\r\n  return {\r\n    type: 'ITEM_REMOVE_FROM_CART',\r\n    payload: id\r\n  }\r\n}","import MenuList from './menu-list';\nexport default MenuList;","import React from 'react';\nimport MenuList from '../menu-list';\n\nconst MainPage = () => {\n    return (\n        <MenuList/>\n    )\n}\n\nexport default MainPage;\n","import React from 'react';\nimport {connect} from 'react-redux'\nimport './cart-table.scss';\nimport {deleteFromCart} from '../../actions/'\n\nconst CartTable = ({items,deleteFromCart}) => {\n    return (\n      <>\n            <div className=\"cart__title\" id='cart'>Ваш заказ:</div>\n            <div className=\"cart__list\">\n              {\n                \n                items.map((item,index,arr) => {\n                  const {title,price,url,id,count} = item\n                  return(\n                    <div className=\"cart__item\" key={id}>\n                    <img src={url} className=\"cart__item-img\" alt={title}></img>\n                    <div className=\"cart__item-title\">{title}</div>\n                    <div className=\"cart__item-price\">{price}$</div>\n                    <div className=\"cart__item-count\">Кол-во: {count}</div>\n                    <div className=\"cart__close\" onClick={() => deleteFromCart(id)}>&times;</div>\n                </div>\n                  )\n                })\n              }\n            </div>\n      </>\n    );\n};\n\nconst mapStateToProps = ({items}) => {\n  return {\n    items\n  }\n}\n\nconst mapDispatchToProps = {\n  deleteFromCart\n}\n\n\nexport default connect(mapStateToProps,mapDispatchToProps)(CartTable);","import CartTable from './cart-table';\n\nexport default CartTable;","import React from 'react';\nimport CartTable from '../cart-table';\n\nconst CartPage = () => {\n    return (\n        <div className=\"cart\"> \n            <CartTable/>\n        </div>\n    )\n}\n\nexport default CartPage;","import AppHeader from './app-header';\n\nexport default AppHeader;","import React from 'react';\nimport cartIcon from './shopping-cart-solid.svg';\nimport './app-header.scss';\nimport {connect} from 'react-redux'\n\nconst AppHeader = ({items}) => {\n  let total = 0\n  items.forEach(e => {\n    total = total + e.price * e.count\n  })\n    return (\n        <header className=\"header\">\n            <a className=\"header__link\" href=\"#menu\">\n                Menu\n            </a>\n            <a className=\"header__link\" href=\"#cart\">\n                <img className=\"header__cart\" src={cartIcon} alt=\"cart\"></img>\n                Total: {total} $\n            </a>\n        </header>\n    )\n};\n\nconst mapStateToProps = ({items}) => {\n  return {\n    items\n  }\n}\n\nexport default connect(mapStateToProps)(AppHeader);","import App from './app';\n\nexport default App;","import React from 'react';\nimport {MainPage, CartPage} from '../pages';\nimport AppHeader from '../app-header'\nimport Background from './food-bg.jpg';\n\nconst App = () => {\n    return (\n        <div style={{background: `url(${Background}) center center/cover no-repeat`}} className=\"app\">\n            <AppHeader/>\n            <MainPage/>\n            <CartPage/>\n        </div>\n    )\n}\n\nexport default App;","import Error from './error';\n\nexport default Error;","import React from 'react';\n\nconst Error = () => {\n    return <div className=\"error\">Error</div>\n}\n\nexport default Error;","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;","import React, {Component} from 'react';\nimport Error from '../error';\n\nexport default class ErrorBoundry extends Component {\n  state = {\n    error: false\n  }\n\n  componentDidCatch() {\n    this.setState({error: true})\n  }\n  render() {\n    if (this.state.error){\n      return <Error/>\n    }\n\n    return this.props.children\n  }\n}","export default class RestoService {\r\n  _apiBase = 'http://localhost:3000'\r\n\r\n  async getResource(url) {\r\n    const res = await fetch(`${this._apiBase}${url}`)\r\n\r\n    if (!res.ok) {\r\n      throw new Error(`Could not fetch ${url}` + `,recived ${res.status}`)\r\n    }\r\n    return await res.json()\r\n  }\r\n  async getMenuItems(){\r\n    return await this.getResource(`/menu/`)\r\n  }\r\n}","const ititialState = {\r\n  menu: [],\r\n  loading: true,\r\n  items: []\r\n}\r\n\r\nconst reducer = (state = ititialState, action) => {\r\n  switch (action.type){\r\n    case 'MENU_LOADED':\r\n      return {\r\n        ...state,\r\n        menu: action.payload,\r\n        loading: false\r\n      }\r\n      case 'MENU_REQUESTED':\r\n      return {\r\n        ...state,\r\n        menu: state.menu,\r\n        loading: true\r\n      }\r\n      case 'ITEM_ADD_TO_CART':\r\n        const id = action.payload\r\n        const cardItems = state.items\r\n        console.log(1);\r\n        const indX = cardItems.findIndex(item => item.id === id)\r\n        if ( indX > -1){\r\n          ++cardItems[indX]['count']\r\n          console.log(3);\r\n          return {\r\n            ...state,\r\n            items: [...cardItems]\r\n          }\r\n        }\r\n        const newItem = state.menu.find(item => item.id === id)\r\n        newItem.count = 1\r\n            console.log(2);\r\n            return{\r\n              ...state,\r\n              items: [...state.items, newItem]\r\n            }\r\n        \r\n      case 'ITEM_REMOVE_FROM_CART':\r\n        const idx = action.payload\r\n        const itemIndex = state.items.findIndex(elem => elem.id === idx)\r\n        return {\r\n          ...state,\r\n          items: [\r\n            ...state.items.slice(0,itemIndex),\r\n            ...state.items.slice(itemIndex + 1)\r\n          ]\r\n        }\r\n    default:\r\n      return state\r\n  }\r\n} \r\n\r\nexport default reducer","import {createStore} from 'redux'\r\nimport reducer from './reducers'\r\n\r\nconst store = createStore(reducer)\r\n\r\nexport default store","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app';\nimport {Provider} from 'react-redux';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport ErrorBoundry from './components/error-boundry';\nimport RestoService from './services/resto-service';\nimport RestoServiceContext from './components/resto-service-context';\nimport store from './store';\nimport './index.scss';\n\nconst restoService = new RestoService();\n\nReactDOM.render(\n    <Provider store={store}>\n      <ErrorBoundry>\n        <RestoServiceContext.Provider value={restoService}>\n          <Router>\n            <App />\n          </Router>\n        </RestoServiceContext.Provider>\n      </ErrorBoundry>\n    </Provider>\n    , document.getElementById('root'));\n"],"sourceRoot":""}